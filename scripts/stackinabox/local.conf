
[[local|localrc]]
#
# Set IP Address of OpenStack Controller
#
IP_VERSION=4
SERVICE_IP_VERSION=4
HOST_IP_IFACE=eth1
HOST_IP=192.168.27.100
PUBLIC_NETWORK_GATEWAY=172.24.4.2
FLOATING_RANGE=172.24.4.0/24
Q_FLOATING_ALLOCATION_POOL=start=172.24.4.3,end=172.24.4.26

FORCE=yes
RECLONE=False
OFFLINE=False
ERROR_ON_CLONE=False
REGION_NAME=labstack

#
# set current branch
#
RELEASE_BRANCH=

#
# Allow services to be hosted on additional machines
#
MULTI_HOST=False

#
# Set OS User DevStack run's under
#
STACK_USER=vagrant

#
# Set Default Virtualization Driver
#
enable_plugin nova-lxd https://github.com/tpouyer/nova-compute-lxd.git
#enable_plugin nova-lxd https://github.com/lxc/nova-compute-lxd

#
# Workflow Service
#
#enable_plugin mistral https://github.com/openstack/mistral

#
# Application Catalog Murano
#
#enable_plugin murano git://git.openstack.org/openstack/murano $RELEASE_BRANCH
#enable_service murano-cfapi
#MURANO_APPS=io.murano.apps.WordPress,io.murano.databases.MySql,io.murano.apps.apache.ApacheHttpServer,io.murano.apps.ZabbixAgent,io.murano.databases,io.murano.apps.ZabbixServer
#MURANO_APPS_REPO=https://github.com/openstack/murano-apps.git
#MURANO_APPS_BRANCH=$RELEASE_BRANCH

#
# Application Catalog UI
#
#enable_plugin app-catalog-ui https://git.openstack.org/openstack/app-catalog-ui

#
# Secrete Key Management
#
#enable_plugin barbican https://git.openstack.org/openstack/barbican $RELEASE_BRANCH

#
# Database As A Service
#
#enable_plugin trove git://git.openstack.org/openstack/trove $RELEASE_BRANCH

#GIT_BASE=https://github.com
DEVSTACK_INSTALL_DIR=/opt/stack/devstack

# Database Type
DATABASE_TYPE=mysql
enable_service mysql
enable_service dstat

# RPC Backend
enable_service rabbit

# Install Location
DEST=/opt/stack

# Log Settings
LOGDAYS=1
VERBOSE=True
LOG_COLOR=True
LOGFILE=$DEST/logs/stack.sh.log
SCREEN_LOGDIR=$DEST/logs/screen
ENABLE_DEBUG_LOG_LEVEL=True

# disable default image additions by DevStack
DOWNLOAD_DEFAULT_IMAGES=False

#
# Set Passwords
#
DATABASE_HOST=192.168.27.100
DATABASE_USER=root
DATABASE_PASSWORD=labstack
ADMIN_PASSWORD=labstack
MYSQL_PASSWORD=labstack
RABBIT_PASSWORD=labstack
SERVICE_PASSWORD=labstack
SERVICE_TOKEN=labstack

#
# Enable Glance - OpenStack Image Service
#
enable_service g-api
enable_service g-reg

#
# Enable Keystone - OpenStack Identity Service
#
enable_service key
#enable_service ldap
#KEYSTONE_IDENTITY_BACKEND=ldap
#KEYSTONE_CLEAR_LDAP=yes

#
# Enable Nova
#
enable_service n-api
enable_service n-crt
enable_service n-obj
enable_service n-cpu
enable_service n-cond
enable_service n-sch
enable_service n-cauth
enable_service n-spice
disable_service n-novnc
disable_service n-xvnc
#enable_service n-api-meta

#
# Enable Neutron (network) Service
#
disable_service n-net
enable_service neutron
enable_service q-svc
enable_service q-agt
enable_service q-dhcp
enable_service q-l3
enable_service q-meta
enable_service q-metering
enable_service q-lbaas
disable_service q-vpnaas
enable_service q-fwaas

#
# Disable security groups entirely
#
LIBVIRT_FIREWALL_DRIVER=neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver

# vxlan tunnels setup
Q_PLUGIN=ml2
Q_ML2_TENANT_NETWORK_TYPE=vxlan
Q_ML2_PLUGIN_TYPE_DRIVERS=vxlan
Q_ML2_PLUGIN_VXLAN_TYPE_OPTIONS=(vni_ranges=1001:2000)
Q_AGENT_EXTRA_AGENT_OPTS=(tunnel_types=vxlan vxlan_udp_port=8472)
Q_USE_NAMESPACE=True
Q_USE_SECGROUP=True
OVS_ENABLE_TUNNELING=True

#
# Enable Designate (DNS) Service
#
#enable_service designate
#enable_service designate-api
#enable_service designate-central
#enable_service designate-mdns
#enable_service designate-sink
#enable_service designate-agent

#
# Enable Swift - Object Storage Service without replication
#
#enable_service s-proxy
#enable_service s-object
#enable_service s-container
#enable_service s-account
#SWIFT_HASH=66a3d6b56c1f479c8b4e70ab5c2000f5
#SWIFT_REPLICAS=1

#
# Enable Cinder - Block Storage service for OpenStack
#
enable_service cinder
enable_service c-sch
enable_service c-api
enable_service c-vol
enable_service c-bak

CINDER_SECURE_DELETE=False
VOLUME_BACKING_FILE_SIZE=50000M

LIVE_MIGRATION_AVAILABLE=False
USE_BLOCK_MIGRATION_FOR_LIVE_MIGRATION=False

#
# Enable Heat (orchestration) Service
#
enable_service heat
enable_service h-eng
enable_service h-api
enable_service h-api-cfn
enable_service h-api-cw

#
# Enable Horizon - OpenStack Dashboard Service
#
enable_service horizon

#
# Enable Ceilometer - Metering Service (metering + alarming)
#
enable_plugin ceilometer git://git.openstack.org/openstack/ceilometer $RELEASE_BRANCH

#
# Telemetry Collection (alarming)
#
enable_plugin aodh https://git.openstack.org/openstack/aodh $RELEASE_BRANCH
enable_service aodh-evaluator
enable_service aodh-notifier
enable_service aodh-api
disable_service ceilometer-alarm-notifier
disable_service ceilometer-alarm-evaluator

#
# Enable Trove (database) Service
#
#enable_service trove
#enable_service tr-api
#enable_service tr-tmgr
#enable_service tr-cond

#
# Enable Sahara (data_processing) Service
#
#enable_service sahara

#
# disable tempest
#
disable_service tempest

#
# set current branch
#
CEILOMETER_BRANCH=$RELEASE_BRANCH
CINDER_BRANCH=$RELEASE_BRANCH
GLANCE_BRANCH=$RELEASE_BRANCH
HEAT_BRANCH=$RELEASE_BRANCH
HORIZON_BRANCH=$RELEASE_BRANCH
IRONIC_BRANCH=$RELEASE_BRANCH
KEYSTONE_BRANCH=$RELEASE_BRANCH
NOVA_BRANCH=$RELEASE_BRANCH
NEUTRON_BRANCH=$RELEASE_BRANCH
REQUIREMENTS_BRANCH=$RELEASE_BRANCH
SWIFT_BRANCH=$RELEASE_BRANCH
#TEMPEST_BRANCH=$RELEASE_BRANCH
TROVE_BRANCH=$RELEASE_BRANCH
OSLOMSG_BRANCH=$RELEASE_BRANCH
SAHARA_BRANCH=$RELEASE_BRANCH
DESIGNATE_BRANCH=$RELEASE_BRANCH

[[post-config|$NOVA_CONF]]
[DEFAULT]
tenant_network_type=vxlan
scheduler_default_filters=AllHostsFilter
instance_usage_audit=True
API_RATE_LIMIT=False
force_config_drive = False
config_drive_format = vfat
metadata_host = $HOST_IP
notification_driver=nova.openstack.common.notifier.rabbit_notifier,ceilometer.compute.nova_notifier

[[post-config|$CINDER_CONF]]
[DEFAULT]
# Cinder does not generate notifications by default
notification_driver=cinder.openstack.common.notifier.rabbit_notifier

[[post-config|$HEAT_CONF]]
[DEFAULT]
notification_driver=heat.openstack.common.notifier.rabbit_notifier

[[post-config|$CEILOMETER_CONF]]
[notification]
store_events=True

[[post-config|$NEUTRON_CONF]]
[database]
min_pool_size = 5
max_pool_size = 50
max_overflow = 50

[[post-config|/$Q_PLUGIN_CONF_FILE]]
[agent]
tunnel_types=vxlan
vxlan_udp_port=8472
